{% extends "Child/base.html" %}
{% load static %}

{% block title %}Exercise Instructions - PhysioMilestones{% endblock %}

{% block content %}
<main class="w-full max-w-4xl bg-white p-8 rounded-2xl shadow-md mx-auto">
    {% if assigned_exercise %}
    <!-- Header -->
    <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-slate-900">
            How to do {{ assigned_exercise.Exercise.name }}
        </h1>
        <p class="text-slate-500 mt-1">
            Watch the video and read the instructions carefully before you begin.
        </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
        <!-- Left Panel: YouTube Video Embed -->
        <div class="aspect-video rounded-xl overflow-hidden shadow-lg">
            {% if assigned_exercise.Exercise.youtube_id %}
                <iframe 
                    width="100%" 
                    height="100%" 
                    src="https://www.youtube.com/embed/{{ assigned_exercise.Exercise.youtube_id }}" 
                    title="Exercise Video" 
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            {% else %}
                <p class="text-center text-slate-500">No video available.</p>
            {% endif %}
        </div>

        <!-- Right Panel: Instructions & Action Button -->
        <div class="space-y-6">
            <div>
                <h2 class="text-xl font-bold mb-2">Instructions</h2>
                <p class="text-slate-600">{{ assigned_exercise.instruction }}</p>
                <ul class="list-disc list-inside space-y-2 text-slate-600">
                    <li>Reps: {{ assigned_exercise.reps }}</li>
                    <li>Sets: {{ assigned_exercise.sets }}</li>
                </ul>
            </div>
            <div class="text-center">
                <a href="{% url 'instruction' %}" 
                   class="w-full inline-block bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-8 rounded-lg shadow-md transition-transform transform hover:scale-105 text-lg">
                    Let's Begin!
                </a>
            </div>
        </div>
    </div>
    {% else %}
        <p class="text-center text-slate-500">No exercise assigned yet.</p>
    {% endif %}
</main>

<footer class="mt-8 text-center">
    <a href="{% url 'cdashboard' %}" class="text-slate-500 hover:text-slate-700 font-semibold transition-colors">
        &larr; Go back to Dashboard
    </a>
</footer>
{% endblock %}
